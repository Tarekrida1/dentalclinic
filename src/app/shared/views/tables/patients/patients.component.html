

<div class="system-container">
  <div class="table-container">


    <div class="printed_content">
      <p-table [columns]="cols" [value]="data"  selectionMode="multiple" [(selection)]="selectedRow"  dataKey="id" [(contextMenuSelection)]="selectedRow" [globalFilterFields]="['doc_name','phone_number','patient_name']" #dt  [contextMenu]="cm" [value]="data"   [paginator]="true" [rows]="10" >

          <ng-template class="noPrint" pTemplate="caption">

              <div class="d-flex">
                  <button type="button"  (click)="openAddModal(addPatiant)"  class="btn btn-primary ml-2 btn-hover" > اضافة<i class="fas fa-plus"></i></button>

                  <button type="button" (click)="exportExcel()" class="btn btn-secondary ml-2 btn-hover" >نسخة اكسل<i class="far fa-file-excel"></i></button>
                  <button type="button"  (click)="printData()" class="btn btn-success ml-2 btn-hover" >طباعة<i class="fas fa-print"></i></button>

                </div>
              <div class="search" style="text-align: right">
                  <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                  <input type="text" pInputText size="50" placeholder="بحث" (input)="dt.filterGlobal($event.target.value, 'contains')" style="width:auto">
              </div>
          </ng-template >
          <ng-template pTemplate="header" let-columns>
              <tr>
                  <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                      {{col.header}}
                      <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                  </th>

              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData let-expanded="expanded" let-columns="columns"  let-ri="rowIndex" >
              <tr  [pContextMenuRow]="rowData">


                  <td>
                      {{rowData.doc_name}}
                  </td>


                  <td>
                      {{rowData.phone_number}}
                  </td>
                  <td>
                      {{rowData.patient_name}}
                  </td>
              </tr>
          </ng-template>

      </p-table>
  </div>
  </div>
</div>

                  <p-contextMenu #cm [model]="items"></p-contextMenu>



                  <ng-template #addReservation let-modal>
                    <div class="modal-header">
                      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <!-- <div class="modal-header">
                      <h4 class="modal-title" id="modal-basic-title">اضافة موعد</h4>
                      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form #reservation="ngForm" (ngSubmit)="addReservation(reservation)">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group">
                              <div class="input-group dropfield" [ngClass]="{'err' : doc_id.invalid && doc_id.touched}">

                                <p-dropdown [options]="doc_name"  ngModel #doc_id="ngModel" name="doc_id" required  class="form-control main-search-input form-control-lg" [filter]="true" filterBy="label,value.name"></p-dropdown>

                                <div class="input-group-append d-flex align-items-center">
                                  <i class="fas fa-user-md"></i>
                                </div>
                              </div>
                              <p class="err-message bounceInRight" role="alert" *ngIf="doc_id.invalid && doc_id.touched">
                                 من فضلك اختر دكتور
                             </p>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Save</button>
                    </div> -->
                    <app-add-reservation></app-add-reservation>
                  </ng-template>

                  <ng-template #addPatiant let-modal>
                    <div class="modal-header">
                      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <h4 class="modal-title text-center" id="modal-basic-title">اضافة مريض</h4>

                    <div class="modal-body">
                    <app-add-patiant></app-add-patiant>

                    </div>
                  </ng-template>
                  <!-- <button class="btn btn-lg btn-outline-primary" (click)="openSm(content)">Launch demo modal</button> -->
